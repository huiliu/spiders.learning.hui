计算球员比赛表现得分
*********************

当前有三个spider:

1.  fixtures    抓取赛程
2.  images      下载头像
3.  live        抓取赛事详细统计

spider抓取的数据都被存储在\ ``MongoDB``\ 中。

.. warnning::

    操作前请先备份MongoDB

    ``mongoexport -h 10.1.0.6 -d football -c xxxx -o football.json``

抓取赛程信息
===============
使用spider ``fixtures``\ 可以抓取相关赛季的赛程。

网站上关于赛程的URL为：\

``http://soccerdata.sports.qq.com/s/fixture/list.action?time=%s&compid=%d``

其中：
1.  ``time``\ 为赛季第一场比赛开始的日志，格式为：\ ``YYYY-MM-DD``\ ，如：\
    *2016-03-24*\ 
2.  ``compid``\ 为赛事类型ID。当前网站定义为（此值由被爬网站定义的，勿猜）：\
    8: 英超；22: 德甲；21：意甲；23 ：西甲；24：法甲；208：中超；5：欧冠；\
    6：欧联；605：亚冠

攫取新赛季赛程
---------------
当新赛季数据已经可以查询时，将\ ``time``\ 和\ ``compid``\ 设定好，运行spider，
即会自动抓取整个赛季的赛程。赛程信息存放在指定数据库的\ `fixtures`\
collection中。俱乐部信息存放在指定库的\ `clubs` collection中。

.. warnning::

    注意将不需要的URL删除，以免抓到不需要的数据。

抓取到的赛程信息中包含有\ ``赛季``\ 、 ``日期``\ 等信息可以过滤查找。

抓取比赛统计
=============
spider ``live``\ 用于抓取赛事详细统计，其中包含文字直播信息（可以挖掘一下）。
当前代码，从赛程collection中提取所有赛事的唯一ID，构造出查询URL，然后抓取赛事\
详细统计，然后保存至mongoDB中。


抓取新的比赛统计
------------------
**设定好查询条件**\ ，从赛程表中提取相应的比赛ID，即能自动获取比赛统计信息。



计算球员得分
=============
根据获取的比赛详细统计信息，计算球员相应的得分，利用脚本\ ``calc.py``\ 即可完
成，球员的得分信息存放在\ ``player_score``\ 中。

计算规则由\ ``rules.py``\ 实现。


获取图像
=========
spider \ ``images``\ 会从\ ``球员信息模板(player_template), 俱乐部信息表(clusb)``\
中读取球员唯一ID，俱乐部唯一ID构造URL下载图像。
